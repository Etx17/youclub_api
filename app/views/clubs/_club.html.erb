

<% if club.photos.present? %>
  <div class="card-container d-flex flex-grow-1 my-3 shadow" style="max-width: 600px; border-radius: 10px; background: linear-gradient(to top, rgba(0,0,0,1), rgba(0,0,0,0) 60%), url('<%= cl_image_path club.photos&.first.key, width: 'auto', crop: 'scale', responsive: true, quality: 'auto', fetch_format: 'auto' %>') ;background-size: cover; background-position: center;">
<% else %>
  <div class="card-container d-flex flex-grow-1 my-3 shadow" style="max-width: 600px; border-radius: 10px; background: linear-gradient(to top, rgba(0,0,0,1), rgba(0,0,0,0) 60%), url('https://source.unsplash.com/random/?horse/300/200'); background-size: cover; background-position: center;">
<% end %>
  <div class="d-flex shadow flex-column justify-content-between p-2  w-100" style="border-radius: 10px; height: 80vh;">
    <p></p>
    <div class="d-flex flex-column px-2" style="color: #AAAAAA; border-radius: 10px;">

      <div class="d-flex justify-content-between align-items-start  w-100">
        <% if club.name.length > 30 %>
          <h4 style="max-width: 74%;"><%= link_to club.name, club_path(club), class:"text-decoration-none text-light" %></h4>
        <% else %>
          <h2 style="max-width: 74%;"><%= link_to club.name, club_path(club), class:"text-decoration-none text-light" %></h2>
        <% end %>

        <%= link_to club_path(club), class: "text-decoration-none" do %>
          <div class="btn btn-info py-0 px-1" style="border-radius: 30px">
            <span class='small'>
              <i class="fas fa-eye small"></i>Détails
            </span>
          </div>
        <% end %>
      </div>

      <div class="d-flex flex-wrap gap-2 text-dark align-items-center small">
        <% club.activities&.first(3)&.each do |activity| %>
          <%= link_to activity.name, activity_path(activity.id), class: "btn btn-outline-info pill"  %>
        <% end %>
        <% if club.activities.count > 3 %>
            <%= link_to "et #{club.activities.count - 3} autres ...", club_path(club.id), class: "btn text-info pill"  %>
        <% end %>
      </div>

      <div class="d-flex justify-content-between align-items-center small pt-0">
        <%= link_to "https://www.google.fr/maps/place/#{club.address.gsub(' ', '+')},+#{club.actual_zipcode}", target: "_blank", class:"text-info" do %>
          <i class="fas fa-map-marker-alt"></i> <%= club.address %>
        <% end %>

        <% if session[:coords].present? %>
          <span class="text-white" style="font-size: 1.2em"><%= club.distance_from(session[:coords]).to_s.first(4)%> km</span>
        <% end %>

        <%= club.actual_zipcode %>
      </div>

      <% if club.objet.length > 300 %>
        <p class="small text-secondary"><%= club.objet[0..296] %>…<span class="voir-plus">voir plus</span></p>
      <% else %>
        <p class="small text-secondary"><%= club.objet %></p>
      <% end %>

    </div>
  </div>
</div>
